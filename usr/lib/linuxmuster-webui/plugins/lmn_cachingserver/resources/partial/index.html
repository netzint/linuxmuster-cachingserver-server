<br>
<progress-spinner ng:show="isinstalled == null"></progress-spinner>

<div ng:show="!isinstalled">
    <div class="alert alert-info">
        <i class="fa fa-info-circle"></i> <span translate="">No cachingserver service is installed!</span>.
    </div>
</div>

<div ng:show="isinstalled">
    <uib:tabset active="activeTab">
        <uib:tab heading="{{'Server'|translate}}" ng-click="getServer()">
            <br>
            <div class="server-box">
                <i class="fa fa-desktop" style="font-size: 20pt;"></i><br>
                <span translate>The LMN Server</span>
                <hr>
                <uib-accordion style="text-align: left;">
                    <div uib-accordion-group class="panel-default" is-open="status.open">
                      <uib-accordion-heading>
                        {{'Click her to show all files to sync...' | translate}} <i class="pull-right fa" ng-class="{'fa-arrow-up': status.open, 'fa-arrow-down': !status.open}"></i>
                      </uib-accordion-heading>
                      <table class="table">
                        <tr>
                            <th translate>Filename</th>
                            <th translate>Hash</th>
                            <th translate>Action</th>
                        </tr>
                        <tr ng:repeat="server in serverfilehashes">
                            <td>{{server.filename}}</td>
                            <td>{{server.hash}}</td>
                            <td style="text-align: center;">
                                <i class="fa fa-file-image-o" ng:if="server.action == 'images'" title="Images"></i>
                                <i class="fa fa-heart" ng:if="server.action == 'linbo'" title="Linbo"></i>
                                <i class="fa fa-address-card" ng:if="server.action == 'dhcp'" title="DHCP"></i>
                            </td>
                        </tr>
                      </table>
                    </div>
                  </uib-accordion>
            </div>
            <div class="cache-box" ng:repeat="s in server">
                <i class="fa fa-desktop" style="font-size: 20pt;"></i><br>
                {{s.name}} <span translate>for</span> {{s.school | uppercase}}
                <br>
                <br>
                <div ng:if="s.status"><i class="fa fa-circle" style="color:green;"></i> Server is online!</div>
                <div ng:if="!s.status"><i class="fa fa-circle" style="color:red;"></i> Server is offline!</div>
                <hr>
                <table class="table table-bordered">
                    <tr>
                        <td style="text-align: left;vertical-align: middle;">Images</td>
                        <td style="text-align: center;vertical-align: middle;">
                            <i ng:if="s.filestatus.summary.images" class="fa fa-circle" style="color:green;"></i>
                            <i ng:if="!s.filestatus.summary.images" class="fa fa-circle" style="color:red;"></i>
                        </td>
                        <td><button type="button" class="btn btn-primary btn-sm" ng:click="syncServer(s.name, 'images')">Refresh</button></td>
                    </tr>
                    <tr>
                        <td style="text-align: left;vertical-align: middle;">Linbo</td>
                        <td style="text-align: center;vertical-align: middle;">
                            <i ng:if="s.filestatus.summary.linbo" class="fa fa-circle" style="color:green;"></i>
                            <i ng:if="!s.filestatus.summary.linbo" class="fa fa-circle" style="color:red;"></i>
                        </td>
                        <td><button type="button" class="btn btn-primary btn-sm" ng:click="syncServer(s.name, 'linbo')">Refresh</button></td>
                    </tr>
                    <tr>
                        <td style="text-align: left;vertical-align: middle;">DHCP</td>
                        <td style="text-align: center;vertical-align: middle;">
                            <i ng:if="s.filestatus.summary.dhcp" class="fa fa-circle" style="color:green;"></i>
                            <i ng:if="!s.filestatus.summary.dhcp" class="fa fa-circle" style="color:red;"></i>
                        </td>
                        <td><button type="button" class="btn btn-primary btn-sm" ng:click="syncServer(s.name, 'dhcp')">Refresh</button></td>
                    </tr>
                </table>
            </div>
        </uib:tab>
        <uib:tab heading="{{'Images'|translate}}" ng-click="getImages()">
            <br>
            <table class="table table-bordered">
                <tr>
                    <td></td>
                    <th ng:repeat="s in server">{{s.name}} ({{s.school}})</th>
                </tr>
                <tr ng:repeat="i in images">
                    <th>{{i.filename}} ({{serverfilehashes[i.path].hash}})</th>
                    <td ng:repeat="s in server">
                        <input type="checkbox" ng:checked="s.images.indexOf(i.filename)!==-1" />
                        <i ng:if="serverfilehashes[i.path].hash == s.filestatus.result[i.path].hash" class="fa fa-circle" style="color:green;"></i>&nbsp;
                        <i ng:if="serverfilehashes[i.path].hash != s.filestatus.result[i.path].hash" class="fa fa-circle" style="color:red;"></i>
                        <span ng:if="s.filestatus.result[i.path] != null">({{s.filestatus.result[i.path].hash}})</span>
                    </td>
                </tr>
            </table>
        </uib:tab>
    </uib:tabset>
</div>


